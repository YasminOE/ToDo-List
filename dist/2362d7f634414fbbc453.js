import _ from"lodash";import"./style.css";import handleTask from"./modules/task-handler";import handleViews from"./modules/views";import createInitialPageStructure from"./modules/initial-load-page";import{Task}from"./modules/task-handler";function addNewTask(e,t,l,a,d){return d.addEventListener("click",(()=>{const d=document.getElementById("task-name").value,r=document.getElementById("task-description").value,o=document.getElementById("task-due-date").value,u=document.getElementById("priority-type").value,n=document.getElementById("task-type").value;let i=new Task(d,r,o,u,n);e.addTask(i),console.log(i);const c=l.cloneNode(!0);c.querySelector("#taskName").value=d,c.querySelector("#description").value=r,c.querySelector("#due-date").value=o,c.querySelector("#task-priority-type").value=u,c.querySelector("#type").value=n,a.appendChild(c),document.getElementById("task-name").value="",document.getElementById("task-description").value="",document.getElementById("task-due-date").value="",document.getElementById("priority-type").value="",document.getElementById("task-type").value="";let s=c.querySelector("#edit"),y=c.querySelector("#delete");function m(){document.querySelectorAll("#taskName, #description, #due-date, #task-priority-type, #type").forEach((e=>{e.disabled=!0}))}console.log(s,y),m(),s.addEventListener("click",(()=>{document.querySelectorAll("#taskName, #description, #due-date, #task-priority-type, #type").forEach((e=>{e.disabled=!1}));const e=document.querySelector("#task-action");s.classList.add("active"),c.classList.add("edit-mode"),e.style.visibility="visible",console.log(s);let t="",l="",a="",d="",r="";t=c.querySelector("#taskName").value,l=c.querySelector("#description").value,a=c.querySelector("#due-date").value,d=c.querySelector("#task-priority-type").value,r=c.querySelector("#type").value;const o=document.querySelector("#cancel-btn"),u=document.querySelector("#edit-btn");return console.log(o,u),o&&u&&(u.addEventListener("click",(()=>{const o=c.querySelector("#taskName").value,u=c.querySelector("#description").value,n=c.querySelector("#due-date").value,i=c.querySelector("#task-priority-type").value,y=c.querySelector("#type").value;o===t&&null!==o||(document.getElementById("task-name").value=o),u===l&&null!==u||(document.getElementById("task-description").value=u),n===a&&null!==n||(document.getElementById("task-due-date").value=n),i===d&&null!==i||(document.getElementById("priority-type").value=i),y===r&&null!==y||(document.getElementById("task-type").value=y),e.style.visibility="hidden",s.classList.remove("active"),c.classList.remove("edit-mode"),m()})),o.addEventListener("click",(()=>{c.querySelector("#taskName").value=t,c.querySelector("#description").value=l,c.querySelector("#due-date").value=a,c.querySelector("#task-priority-type").value=d,c.querySelector("#type").value=r,e.style.visibility="hidden",s.classList.remove("active"),c.classList.remove("edit-mode"),m()}))),{saveBtn:u,cancelBtn:o}})),y.addEventListener("click",(()=>{-1!==e.tasks.findIndex((e=>e.taskName===d))&&e.removeTask(d),a.removeChild(c)})),a.removeChild(t)})),d}function init(){const{addBtn:e,taskArea:t,addTaskBlock:l,taskBlock:a}=createInitialPageStructure(),{taskManager:d}=handleTask();handleViews(d);let r=l.querySelector("#add");e.addEventListener("click",(()=>{addNewTask(d,l,a,t,r)}))}init();