import _ from"lodash";import"./style.css";import handleTask from"./modules/task-handler";import handleViews from"./modules/views";import createInitialPageStructure from"./modules/initial-load-page";import{Task}from"./modules/task-handler";function addNewTask(e,t,l,a,r){return r.addEventListener("click",(()=>{const r=document.getElementById("task-name").value,o=document.getElementById("task-description").value,d=document.getElementById("task-due-date").value,i=document.getElementById("priority-type").value,s=document.getElementById("task-type").value;let c=new Task(r,o,d,i,s);e.addTask(c),console.log(c);const u=l.cloneNode(!0);u.querySelector("#taskName").value=r,u.querySelector("#description").value=o,u.querySelector("#due-date").value=d,u.querySelector("#task-priority-type").value=i,u.querySelector("#type").value=s,a.appendChild(u);let n=u.querySelector("#edit"),y=u.querySelector("#delete");function m(){document.querySelectorAll("#taskName, #description, #due-date, #task-priority-type, #type").forEach((e=>{e.disabled=!0}))}console.log(n,y),m(),n.addEventListener("click",(()=>{document.querySelectorAll("#taskName, #description, #due-date, #task-priority-type, #type").forEach((e=>{e.disabled=!1}));const e=document.querySelector("#task-action");n.classList.add("active"),u.classList.add("edit-mode"),e.style.visibility="visible",console.log(n);let t="",l="",a="",r="",o="";t=u.querySelector("#taskName").value,l=u.querySelector("#description").value,a=u.querySelector("#due-date").value,r=u.querySelector("#task-priority-type").value,o=u.querySelector("#type").value;const d=document.querySelector("#cancel-btn"),i=document.querySelector("#edit-btn");return console.log(d,i),d&&i&&(i.addEventListener("click",(()=>{const d=u.querySelector("#taskName").value,i=u.querySelector("#description").value,s=u.querySelector("#due-date").value,c=u.querySelector("#task-priority-type").value,y=u.querySelector("#type").value;d===t&&null!==d||(document.getElementById("task-name").value=d),i===l&&null!==i||(document.getElementById("task-description").value=i),s===a&&null!==s||(document.getElementById("task-due-date").value=s),c===r&&null!==c||(document.getElementById("priority-type").value=c),y===o&&null!==y||(document.getElementById("task-type").value=y),e.style.visibility="hidden",n.classList.remove("active"),u.classList.remove("edit-mode"),m()})),d.addEventListener("click",(()=>{u.querySelector("#taskName").value=t,u.querySelector("#description").value=l,u.querySelector("#due-date").value=a,u.querySelector("#task-priority-type").value=r,u.querySelector("#type").value=o,e.style.visibility="hidden",n.classList.remove("active"),u.classList.remove("edit-mode"),m()}))),{saveBtn:i,cancelBtn:d}})),y.addEventListener("click",(()=>{-1!==e.tasks.findIndex((e=>e.taskName===r))&&e.removeTask(r),a.removeChild(u)})),a.removeChild(t)})),r}function init(){const{addBtn:e,taskArea:t,addTaskBlock:l,taskBlock:a}=createInitialPageStructure(),{taskManager:r}=handleTask();handleViews(r);let o=l.querySelector("#add");e.addEventListener("click",(()=>{addNewTask(r,l,a,t,o)}))}init();