import _ from"lodash";import"./style.css";import handleTask from"./modules/task-handler";import handleViews from"./modules/views";import createInitialPageStructure from"./modules/initial-load-page";import{Task}from"./modules/task-handler";function addNewTask(e,t,l,a,r){return r.addEventListener("click",(()=>{const r=document.getElementById("task-name").value,d=document.getElementById("task-description").value,o=document.getElementById("task-due-date").value,i=document.getElementById("priority-type").value,s=document.getElementById("task-type").value;let u=new Task(r,d,o,i,s);e.addTask(u),console.log(u),l.querySelector("#taskName").value=r,l.querySelector("#description").value=d,l.querySelector("#due-date").value=o,l.querySelector("#task-priority-type").value=i,l.querySelector("#type").value=s,a.appendChild(l);let c=l.querySelector("#edit"),n=l.querySelector("#delete");function y(){document.querySelectorAll("#taskName, #description, #due-date, #task-priority-type, #type").forEach((e=>{e.disabled=!0}))}console.log(c,n),y(),c.addEventListener("click",(()=>{document.querySelectorAll("#taskName, #description, #due-date, #task-priority-type, #type").forEach((e=>{e.disabled=!1}));const e=document.querySelector("#task-action");c.classList.add("active"),l.classList.add("edit-mode"),e.style.visibility="visible",console.log(c);let t="",a="",r="",d="",o="";t=l.querySelector("#taskName").value,a=l.querySelector("#description").value,r=l.querySelector("#due-date").value,d=l.querySelector("#task-priority-type").value,o=l.querySelector("#type").value;const i=document.querySelector("#cancel-btn"),s=document.querySelector("#edit-btn");return console.log(i,s),i&&s&&(s.addEventListener("click",(()=>{const i=l.querySelector("#taskName").value,s=l.querySelector("#description").value,u=l.querySelector("#due-date").value,n=l.querySelector("#task-priority-type").value,m=l.querySelector("#type").value;i===t&&null!==i||(document.getElementById("task-name").value=i),s===a&&null!==s||(document.getElementById("task-description").value=s),u===r&&null!==u||(document.getElementById("task-due-date").value=u),n===d&&null!==n||(document.getElementById("priority-type").value=n),m===o&&null!==m||(document.getElementById("task-type").value=m),e.style.visibility="hidden",c.classList.remove("active"),l.classList.remove("edit-mode"),y()})),i.addEventListener("click",(()=>{l.querySelector("#taskName").value=t,l.querySelector("#description").value=a,l.querySelector("#due-date").value=r,l.querySelector("#task-priority-type").value=d,l.querySelector("#type").value=o,e.style.visibility="hidden",c.classList.remove("active"),l.classList.remove("edit-mode"),y()}))),{saveBtn:s,cancelBtn:i}})),n.addEventListener("click",(()=>{-1!==e.tasks.findIndex((e=>e.taskName===r))&&e.removeTask(r),a.removeChild(l)})),a.removeChild(t)})),r}function init(){const{addBtn:e,taskArea:t,addTaskBlock:l,taskBlock:a}=createInitialPageStructure(),{taskManager:r}=handleTask();handleViews(r);let d=l.querySelector("#add");e.addEventListener("click",(()=>{addNewTask(r,l,a,t,d)}))}init();